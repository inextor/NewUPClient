<div class="save-quote-container mt-5">
	<h2 class="app-page-title text-center">Solicitar Cotización</h2>

	<div class="card bg-white p-4 mt-4">
		<form (ngSubmit)="submitQuote()" ngNativeValidate #quoteForm="ngForm">
			<div class="row">
				<!-- Nombre -->
				<div class="col-md-6 mb-3">
					<label for="nombre" class="form-label">Nombre <span class="text-danger">*</span></label>
					<input
						type="text"
						class="form-control"
						id="nombre"
						name="nombre"
						[(ngModel)]="quotation.nombre"
						required
						placeholder="Ingrese su nombre completo">
				</div>

				<!-- Correo -->
				<div class="col-md-6 mb-3">
					<label for="correo" class="form-label">Correo Electrónico <span class="text-danger">*</span></label>
					<input
						type="email"
						class="form-control"
						id="correo"
						name="correo"
						[(ngModel)]="quotation.correo"
						required
						placeholder="ejemplo@correo.com">
				</div>
			</div>

			<div class="row">
				<!-- Teléfono -->
				<div class="col-md-6 mb-3">
					<label for="telefono" class="form-label">Teléfono</label>
					<input
						type="tel"
						class="form-control"
						id="telefono"
						name="telefono"
						[(ngModel)]="quotation.telefono"
						placeholder="Ingrese su teléfono">
				</div>

				<!-- Cantidad Requerida -->
				<div class="col-md-6 mb-3">
					<label for="cantidad_requerida" class="form-label">Cantidad Requerida</label>
					<input
						type="number"
						class="form-control"
						id="cantidad_requerida"
						name="cantidad_requerida"
						[(ngModel)]="quotation.cantidad_requerida"
						min="1"
						placeholder="Ingrese la cantidad">
				</div>
			</div>

			<div class="row">
				<!-- Fecha de Entrega Solicitada -->
				<div class="col-md-6 mb-3">
					<label for="fecha_entrega" class="form-label">Fecha de Entrega Solicitada</label>
					<input
						type="date"
						class="form-control"
						id="fecha_entrega"
						name="fecha_entrega"
						[(ngModel)]="quotation.fecha_entrega_solicitada">
				</div>
			</div>

			<!-- Descripción -->
			<div class="mb-3">
				<label for="descripcion" class="form-label">Descripción</label>
				<textarea
					class="form-control"
					id="descripcion"
					name="descripcion"
					[(ngModel)]="quotation.descripcion"
					rows="5"
					placeholder="Describa los productos o servicios que necesita..."></textarea>
			</div>

			<!-- Adjuntar Archivos -->
			<div class="mb-3">
				<label for="files" class="form-label">Adjuntar Archivos</label>
				<input
					type="file"
					class="form-control"
					id="files"
					multiple
					(change)="onFilesSelected($event)"
					accept="image/*,.pdf,.doc,.docx">
				<small class="text-muted">Puede seleccionar múltiples archivos (imágenes, PDF, documentos)</small>

				<!-- Show selected files -->
				<div *ngIf="selectedFiles.length > 0" class="mt-3">
					<h6>Archivos seleccionados:</h6>
					<ul class="list-group">
						<li *ngFor="let file of selectedFiles; let i = index" class="list-group-item d-flex justify-content-between align-items-center">
							{{ file.name }} ({{ formatFileSize(file.size) }})
							<button type="button" class="btn btn-sm btn-danger" (click)="removeFile(i)">
								Eliminar
							</button>
						</li>
					</ul>
				</div>
			</div>

			<!-- Submit Button -->
			<div class="text-center mt-4">
				<button
					type="submit"
					class="btn btn-primary btn-lg"
					[disabled]="isSubmitting">
					<span *ngIf="!isSubmitting">Solicitar Cotización</span>
					<span *ngIf="isSubmitting">
						<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
						Enviando...
					</span>
				</button>
			</div>
		</form>

		<!-- Success Message -->
		<div *ngIf="showSuccessMessage" class="alert alert-success mt-4" role="alert">
			<h5 class="alert-heading">¡Solicitud Enviada!</h5>
			<p>Tu solicitud de cotización ha sido enviada correctamente. Nos pondremos en contacto contigo pronto.</p>
			<hr>
			<button class="btn btn-success" (click)="resetForm()">Enviar otra solicitud</button>
		</div>
	</div>
</div>
